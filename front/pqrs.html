<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PQRS - Eb8 Perfumeria</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <header>
      <h1>Formulario PQRS</h1>
    </header>

    <main class="contenido">
      <form id="pqrsForm">
        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" name="nombre" required />

        <label for="correo">Correo:</label>
        <input type="email" id="correo" name="correo" required />

        <label for="tipo">Tipo de Solicitud:</label>
        <select id="tipo" name="tipo" required>
          <option value="pregunta">Pregunta</option>
          <option value="queja">Queja</option>
          <option value="reclamo">Reclamo</option>
          <option value="sugerencia">Sugerencia</option>
        </select>

        <br />

        <label for="mensaje">Mensaje:</label>
        <br />
        <textarea id="mensaje" name="mensaje" rows="5" required></textarea>

        <button type="submit">Enviar</button>
      </form>

      <hr />

      <div id="resultado"></div>
    </main>

    <!-- Barra inferior -->
    <div class="nav-bottom">
      <a href="index.html">Inicio</a>
      <a href="empresa.html">Empresa</a>
      <a href="acerca.html">Acerca de</a>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>
      document
        .getElementById("pqrsForm")
        .addEventListener("submit", function (event) {
          event.preventDefault(); // Evita recargar la página

          // Capturamos los valores
          let nombre = document.getElementById("nombre").value;
          let correo = document.getElementById("correo").value;
          let tipo = document.getElementById("tipo").value;
          let mensaje = document.getElementById("mensaje").value;

          axios
            .post("http://localhost:3000/api/contactanos", {
              nombre: nombre,
              correo: correo,
              tipo: tipo,
              mensaje: mensaje,
            })
            .then(function (response) {
              document.getElementById("resultado").innerHTML =
                "<p style=font-size: 30px;>Formulario enviado con éxito</p>";

                document.getElementById("nombre").value = ''
                document.getElementById("correo").value = ''
                document.getElementById("mensaje").value = ''
            })
            .catch(function (error) {
              console.error("Error al enviar:", error);
              document.getElementById("resultado").innerHTML =
                "<b>Error al enviar el formulario</b>";
            });
        });
    </script>
  </body>
</html>
